<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>HPC against Corona: memilio.epidata.getVaccinationData Namespace Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">HPC against Corona
   &#160;<span id="projectnumber">0.1</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespacememilio.html">memilio</a></li><li class="navelem"><a class="el" href="namespacememilio_1_1epidata.html">epidata</a></li><li class="navelem"><a class="el" href="namespacememilio_1_1epidata_1_1getVaccinationData.html">getVaccinationData</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">memilio.epidata.getVaccinationData Namespace Reference</div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a265ffea53c2060ce04cc1eab0bd5f049"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacememilio_1_1epidata_1_1getVaccinationData.html#a265ffea53c2060ce04cc1eab0bd5f049">compute_vaccination_ratios</a> (age_group_list, vaccinations_table, vacc_column, region_column, population, merge_2022=False)</td></tr>
<tr class="memdesc:a265ffea53c2060ce04cc1eab0bd5f049"><td class="mdescLeft">&#160;</td><td class="mdescRight">Computes vaccination ratios based on the number of vaccinations and the corresponding population data.  <a href="namespacememilio_1_1epidata_1_1getVaccinationData.html#a265ffea53c2060ce04cc1eab0bd5f049">More...</a><br /></td></tr>
<tr class="separator:a265ffea53c2060ce04cc1eab0bd5f049"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4961a3f05b9e939180c316a16b4e14ba"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacememilio_1_1epidata_1_1getVaccinationData.html#a4961a3f05b9e939180c316a16b4e14ba">create_intervals_mapping</a> (from_lower_bounds, to_lower_bounds)</td></tr>
<tr class="memdesc:a4961a3f05b9e939180c316a16b4e14ba"><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates a mapping from given intervals to new desired intervals.  <a href="namespacememilio_1_1epidata_1_1getVaccinationData.html#a4961a3f05b9e939180c316a16b4e14ba">More...</a><br /></td></tr>
<tr class="separator:a4961a3f05b9e939180c316a16b4e14ba"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a83332e6031e5a82fac8a3d7b59eaa785"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacememilio_1_1epidata_1_1getVaccinationData.html#a83332e6031e5a82fac8a3d7b59eaa785">download_vaccination_data</a> ()</td></tr>
<tr class="separator:a83332e6031e5a82fac8a3d7b59eaa785"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6b6c689a88f4c83c8f01c3680df4edc8"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacememilio_1_1epidata_1_1getVaccinationData.html#a6b6c689a88f4c83c8f01c3680df4edc8">get_vaccination_data</a> (read_data=dd.defaultDict['read_data'], file_format=dd.defaultDict['file_format'], out_folder=dd.defaultDict['out_folder'], no_raw=dd.defaultDict['no_raw'], start_date=dd.defaultDict['start_date'], end_date=dd.defaultDict['end_date'], make_plot=dd.defaultDict['make_plot'], moving_average=dd.defaultDict['moving_average'], sanitize_data=1)</td></tr>
<tr class="memdesc:a6b6c689a88f4c83c8f01c3680df4edc8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Downloads the RKI vaccination data and provides different kind of structured data.  <a href="namespacememilio_1_1epidata_1_1getVaccinationData.html#a6b6c689a88f4c83c8f01c3680df4edc8">More...</a><br /></td></tr>
<tr class="separator:a6b6c689a88f4c83c8f01c3680df4edc8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5e2a6efea7e616a039e0ee8657b3cd0b"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacememilio_1_1epidata_1_1getVaccinationData.html#a5e2a6efea7e616a039e0ee8657b3cd0b">main</a> ()</td></tr>
<tr class="memdesc:a5e2a6efea7e616a039e0ee8657b3cd0b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Main program entry.  <a href="namespacememilio_1_1epidata_1_1getVaccinationData.html#a5e2a6efea7e616a039e0ee8657b3cd0b">More...</a><br /></td></tr>
<tr class="separator:a5e2a6efea7e616a039e0ee8657b3cd0b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6436cd18a22a8e19adc83623c677ee9a"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacememilio_1_1epidata_1_1getVaccinationData.html#a6436cd18a22a8e19adc83623c677ee9a">split_column_based_on_values</a> (df_to_split, column_to_split, column_vals_name, new_column_labels)</td></tr>
<tr class="memdesc:a6436cd18a22a8e19adc83623c677ee9a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Splits a dataframe into separate dataframes.  <a href="namespacememilio_1_1epidata_1_1getVaccinationData.html#a6436cd18a22a8e19adc83623c677ee9a">More...</a><br /></td></tr>
<tr class="separator:a6436cd18a22a8e19adc83623c677ee9a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a id="a265ffea53c2060ce04cc1eab0bd5f049"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a265ffea53c2060ce04cc1eab0bd5f049">&#9670;&nbsp;</a></span>compute_vaccination_ratios()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def memilio.epidata.getVaccinationData.compute_vaccination_ratios </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>age_group_list</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>vaccinations_table</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>vacc_column</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>region_column</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>population</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>merge_2022</em> = <code>False</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Computes vaccination ratios based on the number of vaccinations and the corresponding population data. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">age_group_list</td><td>List of age groups considered. </td></tr>
    <tr><td class="paramname">vaccinations_table</td><td>Table of vaccinations (possible multiple columns for different number of doses) </td></tr>
    <tr><td class="paramname">vacc_column</td><td>Column name of vaccinations_table to be considered. </td></tr>
    <tr><td class="paramname">region_column</td><td>Column of regions in vaccinations table, e.g., ID_County or ID_State. </td></tr>
    <tr><td class="paramname">population</td><td>Table of population data for the given regions and considered age groups. </td></tr>
    <tr><td class="paramname">merge_2022</td><td>[Default: False] Defines whether population data has to be merged to counties as of 2022. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>All vaccination ratios per region and age group. </dd></dl>

</div>
</div>
<a id="a4961a3f05b9e939180c316a16b4e14ba"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4961a3f05b9e939180c316a16b4e14ba">&#9670;&nbsp;</a></span>create_intervals_mapping()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def memilio.epidata.getVaccinationData.create_intervals_mapping </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>from_lower_bounds</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>to_lower_bounds</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Creates a mapping from given intervals to new desired intervals. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">from_lower_bounds</td><td>lower bounds of original intervals </td></tr>
    <tr><td class="paramname">to_lower_bounds</td><td>desired lower bounds of new intervals </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>mapping from intervals to intervals The mapping is given as a list of tupels for every original interval. The list contains a tuple for every new interval intersecting the original interval. Each tuple defines the share of the original interval that is mapped to the new interval and the index of the new interval. We assume that the range of the intervals mapped from is contained in the range of the intervals mapped to. For example for from_lower_bounds = [5,20,30,80,85,90] and to_lower_bounds=[0,15,20,60,100] given the mapping would be [[[2/3,0], [1/3,1]], [[1,2]], [[3/5,2], [2/5,3]], [[1,3]], [[1,3]]] </dd></dl>

</div>
</div>
<a id="a83332e6031e5a82fac8a3d7b59eaa785"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a83332e6031e5a82fac8a3d7b59eaa785">&#9670;&nbsp;</a></span>download_vaccination_data()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def memilio.epidata.getVaccinationData.download_vaccination_data </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a6b6c689a88f4c83c8f01c3680df4edc8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6b6c689a88f4c83c8f01c3680df4edc8">&#9670;&nbsp;</a></span>get_vaccination_data()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def memilio.epidata.getVaccinationData.get_vaccination_data </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>read_data</em> = <code>dd.defaultDict['read_data']</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>file_format</em> = <code>dd.defaultDict['file_format']</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>out_folder</em> = <code>dd.defaultDict['out_folder']</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>no_raw</em> = <code>dd.defaultDict['no_raw']</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>start_date</em> = <code>dd.defaultDict['start_date']</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>end_date</em> = <code>dd.defaultDict['end_date']</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>make_plot</em> = <code>dd.defaultDict['make_plot']</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>moving_average</em> = <code>dd.defaultDict['moving_average']</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>sanitize_data</em> = <code>1</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Downloads the RKI vaccination data and provides different kind of structured data. </p>
<p>The data is read from the internet. The file is read in or stored at the folder "out_folder"/Germany/. To store and change the data we use pandas.</p>
<p>While working with the data</p><ul>
<li>the column names are changed to English depending on <a class="el" href="namespacememilio_1_1epidata_1_1defaultDict.html">defaultDict</a></li>
<li>The column "Date" provides information on the date of each data point given in the corresponding columns.</li>
<li>The data is exported in three different ways:<ul>
<li>all_county_vacc: Resolved per county by grouping all original age groups (05-11, 12-17, 18-59, 60+)</li>
<li>all_county_agevacc_vacc: Resolved per county and original age group (05-11, 12-17, 18-59, 60+)</li>
<li>all_county_ageinf_vacc: Resolved per county and infection data age group (0-4, 5-14, 15-34, 35-59, 60-79, 80+)<ul>
<li>To do so <a class="el" href="namespacememilio_1_1epidata_1_1getPopulationData.html">getPopulationData</a> is used and age group specific date from the original source is extrapolated on the new age groups on county level.</li>
</ul>
</li>
</ul>
</li>
<li>Missing dates are imputed for all data frames ('fillDates' is not optional but always executed).</li>
<li>A central moving average of N days is optional.</li>
<li>Start and end dates can be provided to define the length of the returned data frames.</li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">read_data</td><td>False [Default]. Data is always downloaded from the internet. </td></tr>
    <tr><td class="paramname">file_format</td><td>File format which is used for writing the data. Default defined in <a class="el" href="namespacememilio_1_1epidata_1_1defaultDict.html">defaultDict</a>. </td></tr>
    <tr><td class="paramname">out_folder</td><td>Path to folder where data is written in folder out_folder/Germany. </td></tr>
    <tr><td class="paramname">no_raw</td><td>True or False [Default]. Defines if raw data is saved or not. </td></tr>
    <tr><td class="paramname">start_date</td><td>[Default = '', taken from read data] Start date of stored data frames. </td></tr>
    <tr><td class="paramname">end_date</td><td>[Default = '', taken from read data] End date of stored data frames. </td></tr>
    <tr><td class="paramname">make_plot</td><td>False [Default] or True. Defines if plots are generated with matplotlib. </td></tr>
    <tr><td class="paramname">sanitize_data</td><td>Value in {0,1,2,3}; Default: 1. For many counties, vaccination data is not correctly attributed to home locations of vaccinated persons. If 'sanitize_data' is set to larger 0, this is corrected. 0: No sanitizing applied. 1: Averaging ratios over federal states. 2: Averaging ratios over intermediate regions. 3: All counties with vaccination quotas of more than 'sanitizing_threshold' will be adjusted to the average of its federal state and remaining vaccinations will be distributed to closely connected neighboring regions using commuter mobility networks. The sanitizing threshold will be defined by the age group-specific average on the corresponding vaccination ratios on county and federal state level. </td></tr>
    <tr><td class="paramname">moving_average</td><td>0 [Default] or Number&gt;0. Defines the number of days for which a centered moving average is computed. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a5e2a6efea7e616a039e0ee8657b3cd0b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5e2a6efea7e616a039e0ee8657b3cd0b">&#9670;&nbsp;</a></span>main()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def memilio.epidata.getVaccinationData.main </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Main program entry. </p>

</div>
</div>
<a id="a6436cd18a22a8e19adc83623c677ee9a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6436cd18a22a8e19adc83623c677ee9a">&#9670;&nbsp;</a></span>split_column_based_on_values()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def memilio.epidata.getVaccinationData.split_column_based_on_values </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>df_to_split</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>column_to_split</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>column_vals_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>new_column_labels</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Splits a dataframe into separate dataframes. </p>
<p>For each unique value that appears in a selected column, the corresponding value in another column is transfered to a new dataframe.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">df_to_split</td><td>global pandas dataframe </td></tr>
    <tr><td class="paramname">column_to_split</td><td>identifier of the column for which separate values will define separate dataframes </td></tr>
    <tr><td class="paramname">column_vals_name</td><td>The name of the original column which will be renamed in the separate dataframes according to new_column_labels. </td></tr>
    <tr><td class="paramname">new_column_labels</td><td>new labels for resulting columns. There have to be the same amount of names and unique values. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>an array with the new splitted dataframes </dd></dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>
