<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>HPC against Corona: epidemiology.epidata.getRKIData Namespace Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">HPC against Corona
   &#160;<span id="projectnumber">0.1</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespaceepidemiology.html">epidemiology</a></li><li class="navelem"><a class="el" href="namespaceepidemiology_1_1epidata.html">epidata</a></li><li class="navelem"><a class="el" href="namespaceepidemiology_1_1epidata_1_1getRKIData.html">getRKIData</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">epidemiology.epidata.getRKIData Namespace Reference</div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a025390ea00071319773c15f1bbc1f545"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceepidemiology_1_1epidata_1_1getRKIData.html#a025390ea00071319773c15f1bbc1f545">check_for_completeness</a> (df)</td></tr>
<tr class="memdesc:a025390ea00071319773c15f1bbc1f545"><td class="mdescLeft">&#160;</td><td class="mdescRight">Checks if all states are mentioned.  <a href="namespaceepidemiology_1_1epidata_1_1getRKIData.html#a025390ea00071319773c15f1bbc1f545">More...</a><br /></td></tr>
<tr class="separator:a025390ea00071319773c15f1bbc1f545"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab2519753fcb2a949c435afbb923de47b"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceepidemiology_1_1epidata_1_1getRKIData.html#ab2519753fcb2a949c435afbb923de47b">fill_df</a> (rki_old, group_by, avg_by, moving_average)</td></tr>
<tr class="memdesc:ab2519753fcb2a949c435afbb923de47b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Fills missing dates of df and optionally calculates the the 7 day moving average of the rki data.  <a href="namespaceepidemiology_1_1epidata_1_1getRKIData.html#ab2519753fcb2a949c435afbb923de47b">More...</a><br /></td></tr>
<tr class="separator:ab2519753fcb2a949c435afbb923de47b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2a5597ed7953e248782002d1c822af6c"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceepidemiology_1_1epidata_1_1getRKIData.html#a2a5597ed7953e248782002d1c822af6c">fuse_berlin</a> (df)</td></tr>
<tr class="memdesc:a2a5597ed7953e248782002d1c822af6c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Concatenates the different districts of Berlin into one district.  <a href="namespaceepidemiology_1_1epidata_1_1getRKIData.html#a2a5597ed7953e248782002d1c822af6c">More...</a><br /></td></tr>
<tr class="separator:a2a5597ed7953e248782002d1c822af6c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac9bf4e91959ad9c0fdf46d8ebef5ab7f"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceepidemiology_1_1epidata_1_1getRKIData.html#ac9bf4e91959ad9c0fdf46d8ebef5ab7f">get_rki_data</a> (read_data=dd.defaultDict['read_data'], file_format=dd.defaultDict['file_format'], out_folder=dd.defaultDict['out_folder'], no_raw=dd.defaultDict['no_raw'], fill_dates=dd.defaultDict['fill_dates'], make_plot=dd.defaultDict['make_plot'], moving_average=dd.defaultDict['moving_average'], split_berlin=dd.defaultDict['split_berlin'])</td></tr>
<tr class="memdesc:ac9bf4e91959ad9c0fdf46d8ebef5ab7f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Downloads the RKI data and provides different kind of structured data.  <a href="namespaceepidemiology_1_1epidata_1_1getRKIData.html#ac9bf4e91959ad9c0fdf46d8ebef5ab7f">More...</a><br /></td></tr>
<tr class="separator:ac9bf4e91959ad9c0fdf46d8ebef5ab7f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a89cea2c2eb1ac9772c272627b19de489"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceepidemiology_1_1epidata_1_1getRKIData.html#a89cea2c2eb1ac9772c272627b19de489">main</a> ()</td></tr>
<tr class="memdesc:a89cea2c2eb1ac9772c272627b19de489"><td class="mdescLeft">&#160;</td><td class="mdescRight">Main program entry.  <a href="namespaceepidemiology_1_1epidata_1_1getRKIData.html#a89cea2c2eb1ac9772c272627b19de489">More...</a><br /></td></tr>
<tr class="separator:a89cea2c2eb1ac9772c272627b19de489"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a id="a025390ea00071319773c15f1bbc1f545"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a025390ea00071319773c15f1bbc1f545">&#9670;&nbsp;</a></span>check_for_completeness()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def epidemiology.epidata.getRKIData.check_for_completeness </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>df</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Checks if all states are mentioned. </p>
<p>This check had to be added, due to incomplete data downloads because of changes from RKI-site It is checked if 16 states are part of the data. If data is incomplete the data is downloaded from another possibility It would be useful to add even more checks</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">df</td><td>pandas dataframe to check </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Boolean to say if data is complete or not </dd></dl>

</div>
</div>
<a id="ab2519753fcb2a949c435afbb923de47b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab2519753fcb2a949c435afbb923de47b">&#9670;&nbsp;</a></span>fill_df()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def epidemiology.epidata.getRKIData.fill_df </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>rki_old</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>group_by</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>avg_by</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>moving_average</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Fills missing dates of df and optionally calculates the the 7 day moving average of the rki data. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">rki_old</td><td>pandas dataframe </td></tr>
    <tr><td class="paramname">group_by</td><td>List of columns which hold the specifications of the dataframe (Region, age, gender,...) </td></tr>
    <tr><td class="paramname">avg_by</td><td>List of columns for which the rolling average should be computed (Confirmed, recovered, deaths) </td></tr>
    <tr><td class="paramname">moving_average</td><td>Flag which indicates whether to compute the moving average </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>dataframe with filled dates/moving average </dd></dl>

</div>
</div>
<a id="a2a5597ed7953e248782002d1c822af6c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2a5597ed7953e248782002d1c822af6c">&#9670;&nbsp;</a></span>fuse_berlin()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def epidemiology.epidata.getRKIData.fuse_berlin </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>df</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Concatenates the different districts of Berlin into one district. </p>
<p>The RKI data for Berlin is devided into 7 different districts. This does not correspond to the other datasets, which usually has only one entry for Berlin. This function is used to replace the entries of the 7 different districts with only one county, which is called 'Berlin'.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">df</td><td>pandas dataframe </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>dataframe with fused Berlin </dd></dl>

</div>
</div>
<a id="ac9bf4e91959ad9c0fdf46d8ebef5ab7f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac9bf4e91959ad9c0fdf46d8ebef5ab7f">&#9670;&nbsp;</a></span>get_rki_data()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def epidemiology.epidata.getRKIData.get_rki_data </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>read_data</em> = <code>dd.defaultDict['read_data']</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>file_format</em> = <code>dd.defaultDict['file_format']</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>out_folder</em> = <code>dd.defaultDict['out_folder']</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>no_raw</em> = <code>dd.defaultDict['no_raw']</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>fill_dates</em> = <code>dd.defaultDict['fill_dates']</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>make_plot</em> = <code>dd.defaultDict['make_plot']</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>moving_average</em> = <code>dd.defaultDict['moving_average']</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>split_berlin</em> = <code>dd.defaultDict['split_berlin']</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Downloads the RKI data and provides different kind of structured data. </p>
<p>The data is read either from the internet or from a json file (FullDataRKI.json), stored in an earlier run. If the data is read from the internet, before changing anything the data is stored in FullDataRKI.json. If data should be downloaded, it is checked if data contains all 16 states. If not a different source is tried, in this case a column has to be renamed. The file is read in or stored at the folder "out_folder"/Germany/. To store and change the data we use pandas</p>
<p>While working with the data</p><ul>
<li>the column names are changed to english depending on <a class="el" href="namespaceepidemiology_1_1epidata_1_1defaultDict.html">defaultDict</a></li>
<li>a new column "Date" is defined.</li>
<li>we are only interested in the values where the parameter NeuerFall, NeuerTodesfall, NeuGenesen are larger than 0. The values, when these parameters are negative are just useful, if one would want to get the difference to the previous day. For details we refer to the above mentioned webpage.</li>
<li>For all different parameters and different columns the values are added up for whole germany for every date and the cumulative sum is calculated. Unless something else is mentioned.</li>
<li>For Berlin all counties can be fused to one [Default]. If Berlin is split, different file names are used.</li>
<li>Following data is generated and written to the mentioned filename<ul>
<li>All infected (current and past) for whole germany are stored in "infected_rki"</li>
<li>All deaths whole germany are stored in "deaths_rki"</li>
<li>Infected, deaths and recovered for whole germany are stored in "all_germany_rki"</li>
<li>Infected split for states are stored in "infected_state_rki"</li>
<li>Infected, deaths and recovered split for states are stored in "all_state_rki"</li>
<li>Infected split for counties are stored in "infected_county_rki(_split_berlin)"</li>
<li>Infected, deaths and recovered split for county are stored in "all_county_rki(_split_berlin)"</li>
<li>Infected, deaths and recovered split for gender are stored in "all_gender_rki"</li>
<li>Infected, deaths and recovered split for state and gender are stored in "all_state_gender_rki"</li>
<li>Infected, deaths and recovered split for county and gender are stored in "all_county_gender_rki(_split_berlin)"</li>
<li>Infected, deaths and recovered split for age are stored in "all_age_rki"</li>
<li>Infected, deaths and recovered split for state and age are stored in "all_state_age_rki"</li>
<li>Infected, deaths and recovered split for county and age are stored in "all_county_age_rki(_split_berlin)"</li>
</ul>
</li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">read_data</td><td>False [Default] or True. Defines if data is read from file or downloaded. </td></tr>
    <tr><td class="paramname">file_format</td><td>File format which is used for writing the data. Default defined in <a class="el" href="namespaceepidemiology_1_1epidata_1_1defaultDict.html">defaultDict</a>. </td></tr>
    <tr><td class="paramname">out_folder</td><td>Path to folder where data is written in folder out_folder/Germany. </td></tr>
    <tr><td class="paramname">no_raw</td><td>True or False [Default]. Defines if unchanged raw data is saved or not. </td></tr>
    <tr><td class="paramname">fill_dates</td><td>False [Default] or True. Defines if dates where nothing changed are added. </td></tr>
    <tr><td class="paramname">make_plot</td><td>False [Default] or True. Defines if plots are generated with matplotlib. </td></tr>
    <tr><td class="paramname">moving_average</td><td>True or False [Default]. Defines if files for 7 day moving average should be created </td></tr>
    <tr><td class="paramname">split_berlin</td><td>True or False [Default]. Defines if Berlin counties is fused to just on county. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a89cea2c2eb1ac9772c272627b19de489"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a89cea2c2eb1ac9772c272627b19de489">&#9670;&nbsp;</a></span>main()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def epidemiology.epidata.getRKIData.main </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Main program entry. </p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>
